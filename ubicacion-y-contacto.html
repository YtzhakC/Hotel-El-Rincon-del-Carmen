<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ubicación y Contacto - Hotel El Rincón del Carmen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        html {
            scroll-behavior: smooth;
        }
        .hamburger {
            display: none;
            cursor: pointer;
            transition: all 0.3s ease-in-out;
        }
        .bar {
            display: block;
            width: 25px;
            height: 3px;
            margin: 5px auto;
            transition: all 0.3s ease-in-out;
            background-color: white;
        }
        @media (max-width: 768px) {
            .hamburger {
                display: block;
            }
            .nav-menu {
                position: fixed;
                top: 4vh;
                left: -100%;
                width: 100%;
                background-color: #2563eb;
                text-align: center;
                transition: 0.3s ease-in-out;
                z-index: 10;
            }
            .nav-menu.active {
                left: 0;
                display: flex;
                flex-direction: column;
            }
            #navButtons {
                position: fixed;
                top: 21vh;
                left: -100%;
                width: 100%;
                background-color: #2563eb;
                text-align: center;
                transition: 0.3s ease-in-out;
                z-index: 10;
            }
            #navButtons.active {
                left: 0;
                display: flex;
                flex-direction: column;
            }
            .nav-item {
                margin: 16px 0;
            }
            .desktop-only {
                display: none;
            }
            .hamburger.active .bar:nth-child(2) {
                opacity: 0;
            }
            .hamburger.active .bar:nth-child(1) {
                transform: translateY(8px) rotate(45deg);
            }
            .hamburger.active .bar:nth-child(3) {
                transform: translateY(-8px) rotate(-45deg);
            }
        }
    </style>
    
</head>
<body class="bg-gray-50 text-gray-800">
    <!-- Barra de navegación -->
    <nav class="bg-blue-600 text-white p-4 sticky top-0 shadow-md z-10">
        <div class="container mx-auto flex justify-between items-center">
            <div class="text-lg font-bold">Hotel El Rincón del Carmen</div>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <ul class="nav-menu flex flex-wrap gap-2 sm:gap-2">
                <li class="nav-item"><a href="index.html" class="hover:underline">Inicio</a></li>
                <li class="nav-item"><a href="disponibilidad.html" class="hover:underline">Reservas</a></li>
                <li class="nav-item"><a href="ubicacion-y-contacto.html" class="hover:underline">Contacto</a></li>
            </ul>
            <ul id="navButtons" class="flex gap-2 sm:gap-2">
                <!-- Los botones se cargarán dinámicamente aquí -->
            </ul>
        </div>
    </nav>

    <!-- Mapa de Google Maps -->
    <section class="bg-white py-16">
        <div class="container mx-auto text-center px-4">
            <h1 class="text-4xl font-bold mb-6">Ubicación</h1>
            <p class="text-lg mb-6">Encuéntranos en la mejor zona para disfrutar de una experiencia única.</p>
            <div class="w-full max-w-4xl mx-auto">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3943.1905646995738!2d-73.09749868590848!3d7.028801505542957!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e6838aacc3679ef%3A0x6a29bac17324cbd8!2sV%C3%ADa%20Ruitoque%20Alto%2C%20Santander!5e1!3m2!1ses-419!2sco!4v1736898244200!5m2!1ses-419!2sco" 
                    width="100%" 
                    height="450" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
        </div>
    </section>

    <!-- Información de contacto -->
    <section id="contacto" class="bg-white py-16">
        <div class="container mx-auto text-center px-4">
            <h2 class="text-3xl font-bold mb-6">Contáctanos</h2>
            <p class="mb-6">Estamos aquí para ayudarte. Contáctanos por cualquiera de los siguientes medios</p>
            <div class="flex flex-wrap justify-center gap-6">
                <div class="bg-gray-100 p-4 rounded shadow w-full sm:w-1/2 lg:w-1/3">
                    <h3 class="font-bold mb-2">Dirección</h3>
                    <p>Vía Ruitoque Alto, Floridablanca - Santander</p>
                </div>
                <div class="bg-gray-100 p-4 rounded shadow w-full sm:w-1/2 lg:w-1/3">
                    <h3 class="font-bold mb-2">Teléfono</h3>
                    <p>+57 319 4700 704</p>
                </div>
                <div class="bg-gray-100 p-4 rounded shadow w-full sm:w-1/2 lg:w-1/3">
                    <h3 class="font-bold mb-2">Correo</h3>
                    <p>rincondelcarmen@info.com</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Botón flotante de WhatsApp -->
    
    <script>
        document.addEventListener('DOMContentLoaded', async function () {
            const user = JSON.parse(localStorage.getItem('user'));
            const navButtons = document.getElementById('navButtons');
            const hamburger = document.querySelector(".hamburger");
            const navMenu = document.querySelector(".nav-menu");
            const navButtonsMenu = document.getElementById("navButtons");
    
            // Actualizar los botones de navegación
            function updateNavButtons() {
                if (user) {
                    navButtons.innerHTML = `
                        <li class="nav-item text-white pt-3 desktop-only">Bienvenid@, ${user.nombre}</li>
                        <li class="nav-item"><button class="bg-white text-blue-600 px-4 py-2 rounded shadow hover:bg-gray-200" onclick="logout()">Cerrar sesión</button></li>
                        <li class="nav-item"><button class="bg-white text-blue-600 px-4 py-2 rounded shadow hover:bg-gray-200" onclick="location.href='panel-usuario.html'">Panel de Usuario</button></li>
                    `;
                } else {
                    navButtons.innerHTML = `
                        <li class="nav-item"><button class="bg-white text-blue-600 px-4 py-2 rounded shadow hover:bg-gray-200" onclick="location.href='registro.html'">Registro</button></li>
                        <li class="nav-item"><button class="bg-white text-blue-600 px-4 py-2 rounded shadow hover:bg-gray-200" onclick="location.href='login.html'">Login</button></li>
                    `;
                }
            }
    
            // Llamar a funciones adicionales si el usuario está presente
            if (user) {
                await fetchRooms();
                await fetchUserReservations();
            } else if (document.getElementById('userReservations')) {
                document.getElementById('userReservations').innerHTML = '<p class="text-xl">Por favor, inicia sesión para ver tus reservas.</p>';
            }
    
            // Manejar el evento de eliminar cuenta si el botón existe
            const deleteAccountBtn = document.getElementById('deleteAccountBtn');
            if (deleteAccountBtn) {
                deleteAccountBtn.addEventListener('click', deleteAccount);
            }
    
            // Funcionalidad del menú hamburguesa
            function toggleMenu() {
                hamburger.classList.toggle("active");
                navMenu.classList.toggle("active");
                navButtonsMenu.classList.toggle("active");
            }
    
            hamburger.addEventListener("click", toggleMenu);
    
            // Cerrar menú móvil al hacer clic en un elemento del menú
            const navLinks = document.querySelectorAll(".nav-item");
    
            navLinks.forEach(n => n.addEventListener("click", closeMenu));
    
            function closeMenu() {
                hamburger.classList.remove("active");
                navMenu.classList.remove("active");
                navButtonsMenu.classList.remove("active");
            }
    
            // Actualizar los botones de navegación y agregar event listeners nuevamente
            updateNavButtons();
            function addNavButtonListeners() {
                const newNavLinks = document.querySelectorAll(".nav-item");
                newNavLinks.forEach(n => n.addEventListener("click", closeMenu));
            }
            addNavButtonListeners();
            
            async function fetchRooms() {
            try {
                const response = await fetch('http://localhost:3000/cuartos');
                rooms = await response.json();
            } catch (error) {
                console.error('Error fetching rooms:', error);
                // You might want to add some error handling here, like displaying a message to the user
            }
        }
        
            async function fetchUserReservations() {
                    if (!user) return;
                    try {
                        const response = await fetch(`http://localhost:3000/usuarios/${user.id}`);
                        const userData = await response.json();
                        user.reservas = userData.reservas;
                        console.log('User reservations:', user.reservas);
                        displayUserReservations();
                    } catch (error) {
                        console.error('Error fetching user reservations:', error);
                    }
                }
        });
    
        function logout() {
            localStorage.removeItem('user');
            location.href = 'index.html';
        }
    
    

    </script>
    
</body>
</html>